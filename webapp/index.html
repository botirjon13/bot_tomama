<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Tomama O‚Äòyini</title>
  
  <!-- Telegram SDK - To'g'ri manzil (Tugmalar ishlashi uchun muhim) -->
  <script src="telegram.org"></script>
  
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- FONDA HARAKATLANUVCHI POMIDORLAR -->
<div class="bg-elements">
    <img src="assaets/products/tomatoFon.png" class="floating-item item-1">
    <img src="assaets/products/tomatoFon.png" class="floating-item item-2">
    <img src="assaets/products/tomatoFon.png" class="floating-item item-3">
</div>
  
  <!-- ASOSIY MENYU OYNASI -->
  <div id="mainMenu" class="menu-container">
    <div class="menu-box">
        <img src="assaets/logo.png" alt="Tomama Logo" class="game-logo">
        
        <!-- SHAXSIY REKORD EKRANI -->
        <div id="recordBox" style="color: #fff; margin-bottom: 20px; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 15px;">
            <span style="font-size: 14px; opacity: 0.8;">Sizning rekordingiz:</span><br>
            <strong id="personalBest" style="font-size: 24px; color: #ffd700;">0</strong>
        </div>

        <button onclick="startGame()">‚ñ∂Ô∏è O'yinni boshlash</button>
        <button onclick="showRanking()">üèÜ Reyting (Top-10)</button>
        <button onclick="showCoupons()">üé´ Kuponlarim</button>
    </div>
  </div>

  <!-- REYTING OYNASI -->
  <div id="rankingMenu" class="menu-container hidden">
    <div class="menu-box">
        <h2>üèÜ Reyting (Top-10)</h2>
        <ul id="rankingList">
            <li>1. Sardorbek - 1500 ochko</li>
            <li>2. Ali - 1200 ochko</li>
            <li>3. User3 - 800 ochko</li>
        </ul>
        <button onclick="hideRanking()" class="back-btn">‚¨ÖÔ∏è Ortga</button>
    </div>
  </div>

  <!-- KUPONLAR OYNASI -->
  <div id="couponsMenu" class="menu-container hidden">
    <div class="menu-box">
        <h2>üé´ Kuponlarim</h2>
        <ul id="couponList">
            <li class="active">Kuponlar hozircha yo'q</li>
        </ul>
        <button onclick="hideCoupons()" class="back-btn">‚¨ÖÔ∏è Ortga</button>
    </div>
  </div>


  <!-- O'YIN MAYDONI (CANVAS) -->
  <canvas id="gameCanvas" class="hidden"></canvas>

  <script>
    // Telegram WebApp ni ishga tushirish
    //const tg = window.Telegram?.WebApp;
    if (tg) {
        tg.ready();
        tg.expand();
    }

    // Sahifa yuklanganda saqlangan rekordni chiqarish
    window.addEventListener('load', () => {
        const highScore = localStorage.getItem('highScore') || 0;
        document.getElementById('personalBest').innerText = highScore;
    });

    // --- MENYU FUNKSIYALARI ---
    function startGame() {
        document.getElementById('mainMenu').classList.add('hidden');
        document.getElementById('gameCanvas').classList.remove('hidden');
        
        // game.js yuklanganini tekshirib keyin ishga tushiramiz
        if (window.startGameLoop) {
            window.startGameLoop(); 
        }
    }

    function showRanking() {
        document.getElementById('mainMenu').classList.add('hidden');
        document.getElementById('rankingMenu').classList.remove('hidden');
    }

    function hideRanking() {
        document.getElementById('mainMenu').classList.remove('hidden');
        document.getElementById('rankingMenu').classList.add('hidden');
    }
    
    function showCoupons() {
        document.getElementById('mainMenu').classList.add('hidden');
        document.getElementById('couponsMenu').classList.remove('hidden');
    }

    function hideCoupons() {
        document.getElementById('mainMenu').classList.remove('hidden');
        document.getElementById('couponsMenu').classList.add('hidden');
    }
  </script>

  <!-- O'yin kodi -->
  <script src="game.js"></script>

</body>
</html>
